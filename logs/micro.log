{"level":"info","ts":"2024-12-10T20:30:40.384+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-10T20:30:40.385+0800","caller":"gb28181/catalog.go:651","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:00:03.077+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:00:03.078+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:00:29.473+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:00:29.474+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:00:31.852+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:00:31.853+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"error","ts":"2024-12-11T11:01:01.855+0800","caller":"gb28181/catalog.go:241","msg":"读取消息时发生错误: [read udp 100.100.155.157:5060: i/o timeout]"}
{"level":"error","ts":"2024-12-11T11:01:01.855+0800","caller":"gb28181/catalog.go:656","msg":"读取消息时发生错误: read udp 100.100.155.157:5060: i/o timeout"}
{"level":"error","ts":"2024-12-11T11:01:31.856+0800","caller":"gb28181/catalog.go:241","msg":"读取消息时发生错误: [read udp 100.100.155.157:5060: i/o timeout]"}
{"level":"error","ts":"2024-12-11T11:01:31.857+0800","caller":"gb28181/catalog.go:656","msg":"读取消息时发生错误: read udp 100.100.155.157:5060: i/o timeout"}
{"level":"error","ts":"2024-12-11T11:02:01.858+0800","caller":"gb28181/catalog.go:241","msg":"读取消息时发生错误: [read udp 100.100.155.157:5060: i/o timeout]"}
{"level":"error","ts":"2024-12-11T11:02:01.858+0800","caller":"gb28181/catalog.go:656","msg":"读取消息时发生错误: read udp 100.100.155.157:5060: i/o timeout"}
{"level":"info","ts":"2024-12-11T11:02:16.097+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:02:16.098+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:30:23.518+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:30:23.519+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:31:46.081+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application... Server"}
{"level":"info","ts":"2024-12-11T11:31:46.082+0800","caller":"gb28181/service.go:271","msg":"模拟 NVR 设备启动..."}
{"level":"info","ts":"2024-12-11T11:31:46.082+0800","caller":"gb28181/service.go:126","msg":"第一次注册消息: %sREGISTER sip:62010000002000000001@1000000000 SIP/2.0\r\nVia: SIP/2.0/UDP 100.100.155.157:5061;rport;branch=z9hG4bK1733887906082522000\r\nFrom: <sip:34020000001110000011@1000000000>;tag=82521000\r\nTo: <sip:34020000001110000011@1000000000>\r\nCall-ID: 82520000\r\nCSeq: 1 REGISTER\r\nContact: <sip:34020000001110000011@100.100.155.157:5061>\r\nMax-Forwards: 70\r\nUser-Agent: Embedded Net DVR/NVR/DVS\r\nExpires: 86400\r\nContent-Length: 0\r\n\r\n"}
{"level":"error","ts":"2024-12-11T11:31:46.083+0800","caller":"gb28181/service.go:274","msg":"注册失败: [读取响应失败: read udp 100.100.155.157:5061->100.100.155.157:5060: read: connection refused]"}
{"level":"info","ts":"2024-12-11T11:51:37.656+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application..."}
{"level":"info","ts":"2024-12-11T11:51:37.657+0800","caller":"gb28181/catalog.go:650","msg":"正在监听传入消息..."}
{"level":"info","ts":"2024-12-11T11:51:49.713+0800","caller":"GB28181_SIP/main.go:9","msg":"Starting application... Server"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/service.go:271","msg":"模拟 NVR 设备启动..."}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/service.go:126","msg":"第一次注册消息: %sREGISTER sip:62010000002000000001@1000000000 SIP/2.0\r\nVia: SIP/2.0/UDP 100.100.155.157:5061;rport;branch=z9hG4bK1733889109714293000\r\nFrom: <sip:34020000001110000011@1000000000>;tag=714292000\r\nTo: <sip:34020000001110000011@1000000000>\r\nCall-ID: 714292000\r\nCSeq: 1 REGISTER\r\nContact: <sip:34020000001110000011@100.100.155.157:5061>\r\nMax-Forwards: 70\r\nUser-Agent: Embedded Net DVR/NVR/DVS\r\nExpires: 86400\r\nContent-Length: 0\r\n\r\n"}
{"level":"debug","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:246","msg":"收到的消息: [REGISTER sip:62010000002000000001@1000000000 SIP/2.0\r\nVia: SIP/2.0/UDP 100.100.155.157:5061;rport;branch=z9hG4bK1733889109714293000\r\nFrom: <sip:34020000001110000011@1000000000>;tag=714292000\r\nTo: <sip:34020000001110000011@1000000000>\r\nCall-ID: 714292000\r\nCSeq: 1 REGISTER\r\nContact: <sip:34020000001110000011@100.100.155.157:5061>\r\nMax-Forwards: 70\r\nUser-Agent: Embedded Net DVR/NVR/DVS\r\nExpires: 86400\r\nContent-Length: 0\r\n\r\n]"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:263","msg":"从以下地址接收到SIP REGISTER: 100.100.155.157:5061"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:324","msg":"已发送200 OK响应"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:667","msg":"与服务器通信已建立。正在发送目录查询..."}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:444","msg":"第1次目录查询已发送"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/service.go:139","msg":"收到的200响应: %sSIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 100.100.155.157:5061;rport;branch=z9hG4bK1733889109714293000\r\nFrom: <sip:34020000001110000011@1000000000>;tag=714292000\r\nTo: <sip:34020000001110000011@1000000000>\r\nCall-ID: 714292000\r\nCSeq: 1 REGISTER\r\nUser-Agent: GoSIP\r\nContent-Length: 0\r\n\r\n"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/service.go:395","msg":"已发送Catalog 200 OK响应"}
{"level":"info","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/service.go:463","msg":"已发送设备列表消息"}
{"level":"debug","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:472","msg":"收到的响应: [SIP/2.0 200 OK\r\nVia: SIP/2.0/UDP 100.100.155.157:5060;rport;branch=z9hG4bK1733889109714603000\r\nFrom: <sip:62010000002000000001@100.100.155.157>;tag=714603000\r\nTo: <sip:34020000001110000011@100.100.155.157>;tag=to-1733889109714724000\r\nCall-ID: 714603000\r\nCSeq: 20 MESSAGE\r\nContent-Length: 0\r\n\r\n]"}
{"level":"warn","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:476","msg":"响应中未包含XML内容"}
{"level":"error","ts":"2024-12-11T11:51:49.714+0800","caller":"gb28181/catalog.go:584","msg":"第一阶段查询第[1 1374389609824]次尝试: %!v(MISSING)"}
{"level":"debug","ts":"2024-12-11T11:51:54.716+0800","caller":"gb28181/catalog.go:472","msg":"收到的响应: [MESSAGE sip:62010000002000000001@1000000000 SIP/2.0\r\nVia: SIP/2.0/UDP 100.100.155.157:5061;rport;branch=z9hG4bK1733889109714723000\r\nFrom: <sip:34020000001110000011@1000000000>;tag=714603000\r\nTo: <sip:34020000001110000011@1000000000>;tag=to-1733889109714724000\r\nCall-ID: 714603000\r\nCSeq: 5276 MESSAGE\r\nContent-Type: Application/MANSCDP+xml\r\nContent-Length: 2683\r\n\r\n<?xml version=\"1.0\" encoding=\"GB2312\"?>\n\t<Response>\n\t\t<CmdType>Catalog</CmdType>\n\t\t<SN>1</SN>\n\t\t<DeviceID>34020000001110000011</DeviceID>\n\t\t<SumNum>11</SumNum>\n\t\t<DeviceList Num=\"11\">\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000021</DeviceID>\n\t\t\t\t\t<Name>1</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.10</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000002</DeviceID>\n\t\t\t\t\t<Name>2</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.13</Address>\n\t\t\t\t\t<Status>ON</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000003</DeviceID>\n\t\t\t\t\t<Name>Camera 01</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.18</Address>\n\t\t\t\t\t<Status>ON</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000004</DeviceID>\n\t\t\t\t\t<Name>3</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.12</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000005</DeviceID>\n\t\t\t\t\t<Name>4</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.14</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000006</DeviceID>\n\t\t\t\t\t<Name>5</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.15</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000007</DeviceID>\n\t\t\t\t\t<Name>6</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.11</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000008</DeviceID>\n\t\t\t\t\t<Name>7</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.16</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000009</DeviceID>\n\t\t\t\t\t<Name>8</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.19</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000010</DeviceID>\n\t\t\t\t\t<Name>9</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.20</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t\t\t<Item>\n\t\t\t\t\t<DeviceID>34020000001320000013</DeviceID>\n\t\t\t\t\t<Name>10</Name>\n\t\t\t\t\t<Manufacturer>Generic</Manufacturer>\n\t\t\t\t\t<Model>Camera</Model>\n\t\t\t\t\t<Address>100.101.138.21</Address>\n\t\t\t\t\t<Status>OFF</Status>\n\t\t\t\t</Item>\n\t\t</DeviceList>\n\t</Response>]"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:487","msg":"解析的目录响应: 总设备数: 11, 设备列表: 11"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:502","msg":"更新后 TotalDevices: 11, DeviceList 长度: 11"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:613","msg":"查询完成，共发现 11 个设备"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000021, 名称: 1, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000002, 名称: 2, 连接状态: ON"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000003, 名称: Camera 01, 连接状态: ON"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000004, 名称: 3, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000005, 名称: 4, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000006, 名称: 5, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000007, 名称: 6, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000008, 名称: 7, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000009, 名称: 8, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000010, 名称: 9, 连接状态: OFF"}
{"level":"info","ts":"2024-12-11T11:51:54.717+0800","caller":"gb28181/catalog.go:615","msg":"设备详情 - ID: 34020000001320000013, 名称: 10, 连接状态: OFF"}
